<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulario - CIC</title>
  <link rel="stylesheet" href="../Styles/formulario.css">
  <link rel="icon" href="/Icons/icono-pavon-arriba.jpeg" type="image/png">
  <style>
    .info-box {
      animation: fadeIn 0.5s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    #codigoModal button:hover {
      background: #2979ff;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(54, 141, 255, 0.3);
    }
  </style>
</head>
<body>
  <div class="volver-container">
    <a href="/index.html" class="btn-volver">Volver al inicio</a>
  </div>
  
  <div class="container">
    <a href="/index.html">
      <img src="../Images/PavonArriba.jpg" alt="Icono Formulario" class="icono-form">
    </a>
    
    <h2>Complete el formulario</h2>
    
    <form id="formulario">
      <!-- HOUSEHOLD -->
      <fieldset>
        <legend>Grupo Familiar</legend>
        
        <div class="info-box" style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #368dff;">
          <strong>‚ÑπÔ∏è ¬øYa registraste a alguien de tu familia antes?</strong>
          <p style="margin: 8px 0 0 0; font-size: 14px; color: #555;">
            Si es la primera vez que complet√°s el formulario, <strong>dej√° el c√≥digo vac√≠o</strong>.<br>
            Si ya registraste a otro familiar, ingres√° el c√≥digo que te dieron para agrupar los datos.
          </p>
        </div>
        
        <div class="row">
          <div class="col-3">
            <label for="hhId">C√≥digo de Familia (opcional)</label>
            <input id="hhId" placeholder="Ej: ABC123XYZ" style="text-transform: uppercase;" />
            <div class="hint">Solo si ya registraste a otro familiar antes</div>
          </div>
          
          <div class="col-3">
            <label for="grupoFamiliar">Apellido de la Familia</label>
            <input id="grupoFamiliar" placeholder="p. ej. G√≥mez, P√©rez-Garc√≠a" />
            <div class="hint">C√≥mo quieren que se llame el grupo familiar</div>
          </div>
          
          <div class="col-2">
            <label for="vivienda">Tipo de Vivienda</label>
            <select id="vivienda">
              <option value="">‚Äî</option>
              <option>Propia</option>
              <option>Alquilada</option>
              <option>Prestada</option>
              <option>Otro</option>
            </select>
          </div>
          
          <div class="col-2"><label for="calle">Calle</label><input id="calle" /></div>
          <div class="col-1"><label for="numero">N√∫mero</label><input id="numero" /></div>
          <div class="col-2"><label for="barrio">Barrio</label><input id="barrio" /></div>
          <div class="col-2"><label for="ciudad">Ciudad</label><input id="ciudad" value="Rosario" /></div>
          <div class="col-2"><label for="provincia">Provincia</label><input id="provincia" value="Santa Fe" /></div>
        </div>
      </fieldset>

      <!-- PERSON -->
      <fieldset>
        <legend>Persona</legend>
        <div class="row">
          <div class="col-2"><label for="relacionHogar">Relaci√≥n</label>
            <select id="relacionHogar">
              <option value="">‚Äî</option><option>Padre</option><option>Madre</option><option>Hijo</option><option>Hija</option><option>Abuelo</option><option>Abuela</option><option>T√≠o</option><option>T√≠a</option><option>Otro</option>
            </select>
          </div>
          <div class="col-2"><label for="nombre">Nombre</label><input id="nombre" required /></div>
          <div class="col-2"><label for="apellido">Apellido</label><input id="apellido" required /></div>
          <div class="col-2"><label for="dni">DNI</label><input id="dni" /></div>
          <div class="col-3">
         <label for="cuit">CUIT (opcional)</label>
         <input id="cuit" placeholder="XX-XXXXXXXX-X" maxlength="13" />
         <div class="hint">Formato: 20-12345678-9</div>
          </div>
          <div class="col-2"><label for="fechaNacimiento">Fecha Nac.</label><input id="fechaNacimiento" type="date"/></div>
          <div class="col-2"><label for="sexo">Sexo</label>
            <select id="sexo"><option value="">‚Äî</option><option>Masculino</option><option>Femenino</option><option>Otro</option></select>
          </div>
          <div class="col-3"><label for="email">Correo</label><input id="email" type="email" /></div>
          <div class="col-3"><label for="telefono">Tel√©fono</label><input id="telefono" /></div>
          <div class="col-3"><label for="ocupacion">Ocupaci√≥n</label><input id="ocupacion" /></div>
          <div class="col-3"><label for="estadoCivil">Estado civil</label>
            <select id="estadoCivil"><option value="">-</option><option>Soltero/a</option><option>Casado/a</option><option>Concubinato</option><option>Divorciado/a</option><option>Viudo/a</option></select>
          </div>
        </div>
      </fieldset>

      <!-- EDUCATION -->
      <fieldset>
        <legend>Educaci√≥n</legend>
        <div class="row">
          <div class="col-2"><label for="nivelActual">Nivel actual</label>
            <select id="nivelActual">
              <option value="">-</option><option>Ninguno</option><option>Primario</option><option>Secundario</option><option>Terciario</option><option>Universitario</option><option>Posgrado</option>
            </select>
          </div>
          <div class="col-2"><label for="institucion">Instituci√≥n</label><input id="institucion" /></div>
          <div class="col-2"><label for="estadoEdu">Estado</label>
            <select id="estadoEdu"><option value="">‚Äî</option><option>Cursando</option><option>Completo</option><option>Incompleto</option></select>
          </div>
          <div class="col-6">
            <label for="anteriores">Estudios anteriores (uno por l√≠nea: nivel | instituci√≥n | estado)</label>
            <textarea id="anteriores" rows="3" placeholder="secundario | Esc. N¬∫ 321 | completo&#10;curso | Taller X | completo"></textarea>
          </div>
        </div>
      </fieldset>

      <!-- DISABILITY / BENEFIT / INSURANCE -->
      <fieldset>
        <legend>Discapacidad / Beneficio / Obra social</legend>
        <div class="row">
          <div class="col-2"><label for="tieneDis">¬øDiscapacidad?</label>
            <select id="tieneDis"><option value="">‚Äî</option><option value="false">No</option><option value="true">Si</option></select>
          </div>
          <div class="col-2"><label for="tipoDis">Tipo</label><input id="tipoDis" placeholder="Auditiva, Visual, Motriz, ..." /></div>
          <div class="col-2"><label for="tratDis">Tratamiento m√©dico</label>
            <select id="tratDis"><option value="">‚Äî</option><option value="false">No</option><option value="true">Si</option></select>
          </div>
          <div class="col-2"><label for="conCUD">¬øCon CUD?</label>
            <select id="conCUD"><option value="">‚Äî</option><option value="false">No</option><option value="true">Si</option></select>
          </div>
          <div class="col-2"><label for="cudVto">Vencimiento CUD</label><input id="cudVto" type="date" /></div>

          <div class="col-2"><label for="tieneBen">¬øPlan / Beneficio?</label>
            <select id="tieneBen"><option value="">‚Äî</option><option value="false">No</option><option value="true">Si</option></select>
          </div>
          <div class="col-2"><label for="nomBen">Nombre plan</label><input id="nomBen" placeholder="AUH, Progresar..." /></div>
          <div class="col-2"><label for="orgBen">Organismo</label><input id="orgBen" placeholder="ANSES, MDS..." /></div>
          <div class="col-2"><label for="estBen">Estado</label>
            <select id="estBen"><option value="">‚Äî</option><option>Activo</option><option>Suspendido</option><option>Finalizado</option></select>
          </div>

          <div class="col-2"><label for="tieneOS">¬øObra social?</label>
            <select id="tieneOS"><option value="">‚Äî</option><option value="false">No</option><option value="true">Si</option></select>
          </div>
          <div class="col-2"><label for="nomOS">Nombre OS</label><input id="nomOS" placeholder="IAPOS, PAMI..." /></div>
        </div>
      </fieldset>

      <!-- Secci√≥n Foto -->
      <fieldset>
        <legend>Foto (opcional)</legend>
        <label for="foto">Subir Foto:</label>
        <input type="file" id="foto" name="foto" accept="image/*">
        <div class="preview" id="preview"></div>
      </fieldset>

      <div class="row">
        <div class="col-3"><button class="ghost" type="reset">Reiniciar Formulario</button></div>
        <div class="col-3"><button class="primary" type="submit">Guardar</button></div>
      </div>
      <p id="status" class="hint"></p>
    </form>
  </div>

  <!-- Modal para mostrar el c√≥digo -->
  <div id="codigoModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; justify-content: center; align-items: center;">
    <div style="background: white; padding: 40px; border-radius: 15px; max-width: 500px; text-align: center; box-shadow: 0 10px 40px rgba(0,0,0,0.3);">
      <h2 style="color: #368dff; margin-bottom: 20px;">‚úÖ ¬°Registro Exitoso!</h2>
      
      <div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin: 20px 0; border: 2px dashed #368dff;">
        <p style="margin-bottom: 10px; font-size: 14px; color: #666;">Tu C√≥digo de Familia es:</p>
        <div id="codigoFamiliaDisplay" style="font-size: 32px; font-weight: bold; color: #368dff; letter-spacing: 3px; font-family: 'Courier New', monospace;"></div>
      </div>
      
      <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin: 20px 0; text-align: left;">
        <strong style="color: #856404;">üìù ¬°IMPORTANTE!</strong>
        <ul style="margin: 10px 0; padding-left: 20px; color: #856404;">
          <li>Guard√° este c√≥digo en un lugar seguro</li>
          <li>Lo vas a necesitar para agregar m√°s familiares</li>
          <li>Si lo perd√©s, pod√©s ir al CIC y te ayudamos</li>
        </ul>
      </div>
      
      <button onclick="cerrarModal()" style="background: #368dff; color: white; padding: 12px 30px; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; margin-top: 10px;">
        Entendido
      </button>
      
      <p style="margin-top: 15px; font-size: 13px; color: #666;">
        ¬øQuer√©s registrar a otro familiar ahora?<br>
        <a href="#" onclick="registrarOtro(); return false;" style="color: #368dff; text-decoration: none; font-weight: bold;">S√≠, agregar otro miembro</a>
      </p>
    </div>
  </div>

  <footer>
    &copy; Todos los derechos reservados - CIC Pav√≥n Arriba
  </footer>

  <!-- Scripts -->
  <script src="../JavaScript/script.js"></script>
  <script src="../javaScript/app.js"></script>
  
  <script>
    // Convertir c√≥digo a may√∫sculas mientras escribe
    document.getElementById('hhId').addEventListener('input', function(e) {
      e.target.value = e.target.value.toUpperCase();
    });

    // Funci√≥n para mostrar el modal con el c√≥digo
    function mostrarCodigoFamilia(codigoFamilia) {
      document.getElementById('codigoFamiliaDisplay').textContent = codigoFamilia;
      const modal = document.getElementById('codigoModal');
      modal.style.display = 'flex';
    }

    function cerrarModal() {
      document.getElementById('codigoModal').style.display = 'none';
      document.getElementById('formulario').reset();
    }

    function registrarOtro() {
      const codigoActual = document.getElementById('codigoFamiliaDisplay').textContent;
      cerrarModal();
      // Pre-llenar el c√≥digo de familia para el siguiente registro
      document.getElementById('hhId').value = codigoActual;
      window.scrollTo(0, 0);
    }

    // Hacer funci√≥n global para que app.js pueda usarla
    window.mostrarCodigoFamilia = mostrarCodigoFamilia;

    
  </script>




</body>
</html>